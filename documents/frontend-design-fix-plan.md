# フロントエンド デザイン修正計画書

## 前提
- モバイル対応を最優先とする。
- MFAコード入力はセキュリティ要件により常時表示とする。
- 管理画面は社内限定運用を前提にし、情報密度は高めでも許容する。

## 目的
- モバイル閲覧時の操作性と可読性を担保する。
- 主要導線（勤怠・申請・ログイン）の完遂率を向上させる。
- 管理画面は運用効率を落とさず、必要な情報を最短で確認できる構造にする。

## 対象範囲
- ヘッダー/共通レイアウト: `frontend/src/components/layout.rs`
- ログイン: `frontend/src/pages/login/components/form.rs`
- 勤怠一覧・期間フォーム: `frontend/src/pages/attendance/components/form.rs`
- 申請一覧: `frontend/src/pages/requests/components/list.rs`
- 管理 申請一覧モーダル: `frontend/src/pages/admin/components/requests.rs`
- 管理 ユーザー一覧: `frontend/src/pages/admin_users/components/list.rs`

## 優先度と改修内容

### P0: モバイルUIの崩れ防止（最優先）
1. ナビゲーションのモバイル対応
   - 対象: `frontend/src/components/layout.rs`
   - 方針:
     - 小画面ではハンバーガー/ドロップダウンメニューに切り替える。
     - `md:` 以上で現在の横並びナビを維持する。
     - 「ログアウト」はメニュー末尾に配置して誤操作を防ぐ。

2. 勤怠 期間フォームの縦積み化
   - 対象: `frontend/src/pages/attendance/components/form.rs`
   - 方針:
     - `flex-col` をベースにし、`md:flex-row` で横並びに戻す。
     - ボタンは `w-full` で縦積みにし、操作領域を広げる。
     - 入力とボタンの視線順序を「日付 → 読み込み → CSV」の順に統一する。

### P1: モバイルでの情報閲覧性の改善
3. 申請一覧テーブルのモバイル表示最適化
   - 対象: `frontend/src/pages/requests/components/list.rs`
   - 方針:
     - `md:hidden` のカードリストを追加し、`hidden md:table` でテーブルを維持する。
     - カード内に「種類/期間/ステータス/提出日/操作」を収める。
     - 行クリックに依存せず「詳細」ボタンを明示する。

4. 管理ユーザー一覧のモバイル対応
   - 対象: `frontend/src/pages/admin_users/components/list.rs`
   - 方針:
     - テーブルに加えてカード表示を用意し、主要情報（ユーザー名/氏名/権限/MFA）を見える化する。
     - 社内運用のため詳細情報はカードに集約し、操作導線（詳細ドロワー）を維持する。

### P2: 使い勝手の微調整（社内運用に配慮）
5. ログインフォームの入力枠整合
   - 対象: `frontend/src/pages/login/components/form.rs`
   - 方針:
     - MFA入力は常時表示のまま、角丸の連結を統一する。
     - 例: `username` が `rounded-t-md`、中段は `rounded-none`、最終段のみ `rounded-b-md`。
     - 「MFAコードは必要な場合のみ使用」の説明テキストを追加して迷いを減らす。

6. 管理 申請詳細モーダルのスキャン性改善
   - 対象: `frontend/src/pages/admin/components/requests.rs`
   - 方針:
     - 主要項目（種別/対象日/ユーザー/ステータス）をラベル付きで表示する。
     - 生JSONは `<details>` に移し、必要時のみ展開する。

## 非対象
- 画面構成の全面刷新やデザインテーマ変更。
- MFAコード入力の表示/非表示切り替え。

## 検証・受け入れ基準
- 360px 幅のスマホ相当でヘッダーが折り返さず、操作が可能。
- 勤怠期間フォームが縦積みで視認/操作できる。
- 申請一覧・ユーザー一覧が横スクロール不要で最低限の情報が読める。
- 既存のデスクトップ表示が崩れていない（`md` 以上で従来表示維持）。

## 影響範囲
- クラス構成の変更により、関連するスナップショットや視覚差分が発生する可能性がある。
- テーブルとカード表示の二重管理により、表示ロジックが増える。

## 進め方（段階実施）
1. P0を実装し、モバイル崩れを解消。
2. P1のカード化を追加し、閲覧性を向上。
3. P2で細部の整合性を揃える。

## 簡易テスト観点
- `frontend/` を起動して 360px / 768px / 1280px で表示確認。
- 申請一覧の「詳細/編集/取消」がモバイルでも操作できること。
- ログイン画面でMFA入力が常時表示されること。
